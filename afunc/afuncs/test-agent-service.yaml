func_name: test-agent-service
description: 执行服务测试脚本，验证 FastAPI + CrewAI 服务的功能
tools: [bash]
capability: |
  此 AFunc 能够执行生成的测试脚本，进行服务的自动化测试，包括启动、健康检查、API测试和停止服务。
inputs:
  - name: test_script
    description: 测试脚本路径，由 generate-service-test-script AFUNC 生成
  - name: python_command
    description: Python 解释器命令，默认为 python
    default: python
outputs:
  - name: test_status
    description: 测试执行状态，"success" 或 "error"
  - name: test_output
    description: 测试脚本的输出结果
  - name: exit_code
    description: 测试脚本的退出码
constraints:
  - 需要 Python 3.7+ 环境
  - 测试脚本必须存在且可执行
  - 需要安装测试脚本所需的依赖（如 requests）
instructions:
  - 检查测试脚本是否存在
  - 执行测试脚本：`{python_command} {test_script}`
  - 捕获测试脚本的输出和退出码
  - 设置 exit_code 为脚本退出码
  - 如果 exit_code 为 0，设置 test_status 为 "success", 设置 test_output 为"all test finished."
  - 如果 exit_code 不为 0，设置 test_status 为 "error", 设置 test_output 为脚本输出内容
  - 更新任务文档的 Runtime Context
