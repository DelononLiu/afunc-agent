# C++项目通用规范

## 目录结构
目录结构说明:
```
project-root/
├── include/        # 头文件目录 (用于 -I 编译选项)
├── src/           # 源码实现目录
├── tests/         # 测试用例目录
└── Makefile       # 构建文件
```
重要说明: include/ 是编译器搜索头文件的目录，通过 `-Iinclude` 选项指定。它不是要包含的文件，而是头文件的存放位置。

## 文件命名
- 头文件: `[name].h`
- 实现文件: `[name].cpp`
- 测试文件: `test_[name].cpp`

## 头文件包含规范
1. **基本原则**
   - 所有头文件必须使用引号形式包含：`#include "filename.h"`
   - 禁止使用相对路径包含头文件（如`#include "../include/filename.h"`）

2. **包含顺序**  
   - 系统头文件在前
   - 第三方库头文件居中
   - 项目头文件在后

3. **示例**
```cpp
// 正确
#include "add.h"

// 错误 
#include "../include/add.h"  // 禁止相对路径
#include <add.h>             // 禁止尖括号
```

## 自动化测试规范

1.  **框架与配置**
    * 项目应使用**轻量级或自定义的单元测试方法**进行测试。
    * **当前阶段，禁止使用大型第三方测试框架**（如 Google Test, Catch2, CUnit, Check, Doctest 等）。
    * 可以使用 C 标准库的 `assert.h` 进行断言，或通过简单的条件判断和打印输出进行测试结果验证。
    * 测试代码应包含必要的配置以独立运行。

2.  **测试用例命名规范**
    * 测试文件的命名应遵循 `test_[function_or_module_name].cpp`。
    * 单个测试用例 (Test Case) 的命名应具有描述性，清晰表明测试的功能和场景。推荐格式：`[被测试函数名]_[场景描述]`。

3.  **测试覆盖要求**
    * 每个公共 API 函数都必须有对应的单元测试。
    * 测试用例应覆盖以下基本场景：
        * **有效输入**：常规有效值。
        * **边界条件**：整数的最大值、最小值，浮点数的零、接近零、最大/小正负值。
        * **特殊值**：零、负数（如果适用）。
        * **类型组合**：例如 `add` 算子应测试整数+整数，浮点数+浮点数，以及**关键的整数+浮点数混合运算**（如果 API 支持隐式转换或重载）。
    * 测试应仅针对单一功能点进行验证，避免一个测试用例测试多个不相关的功能。

4.  **断言使用**
    * 使用测试框架提供的断言机制进行结果验证。
    * 断言应清晰、具体，易于理解失败原因。

## 编码规范
1. **异常处理**
   - 禁止使用C++异常

2. **整数运算安全**  
```cpp
// 禁止
INT_MAX + 1  
// 正确做法  
static_cast<long long>(INT_MAX) + 1
```

## 构建系统
- 使用Make构建系统
- 必须设置头文件搜索路径：`CPPFLAGS += -Iinclude`
- 支持 make test 命令运行测试
- 支持 make clean 清理构建文件
