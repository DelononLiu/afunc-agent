# 大模型性能基准测试数据展示系统 - 产品需求文档 (PRD)

## 1. 文档信息

| 项目 | 内容 |
|------|------|
| 文档版本 | v1.0 |
| 创建日期 | 2025-09-06 |
| 作者 | 系统架构师 |
| 审核人 | 待定 |
| 更新记录 | 首次创建 |

## 2. 产品概述

### 2.1 产品背景
随着大模型技术的快速发展，不同模型在各种推理框架下的性能表现成为用户选择模型的重要参考依据。为了帮助用户更好地评估和比较不同大模型在不同推理框架下的性能表现，需要开发一个专门的数据展示系统。

### 2.2 产品目标
创建一个基于Web的大模型性能基准测试数据展示系统，专为PC大屏设计，支持多种推理框架的性能数据对比分析，提供直观的数据筛选、展示和对比功能。

### 2.3 产品定位
本产品是一个面向AI研究人员、工程师和决策者的数据展示平台，用于分析和比较不同大模型在不同推理框架下的性能表现。

### 2.4 核心价值
- 提供直观的数据展示界面，便于用户快速了解模型性能
- 支持多维度数据筛选，满足不同分析需求
- 提供可视化对比功能，帮助用户做出更好的模型选择决策
- 支持数据导出，便于进一步分析

## 3. 用户需求分析

### 3.1 目标用户群体
1. **AI研究人员** - 需要对比不同模型和框架的性能数据
2. **工程师** - 需要为项目选择合适的模型和推理框架
3. **技术决策者** - 需要基于性能数据做出技术选型决策

### 3.2 用户场景
1. **数据加载场景** - 用户需要将基准测试数据导入系统进行分析
2. **数据筛选场景** - 用户需要根据特定条件筛选数据
3. **数据对比场景** - 用户需要对比不同模型或框架的性能表现
4. **数据导出场景** - 用户需要将分析结果导出用于报告或进一步分析

### 3.3 用户痛点
1. 缺乏直观的数据展示工具，难以快速理解性能数据
2. 数据分散在不同文件中，整合分析困难
3. 缺乏有效的对比工具，难以评估不同方案的优劣
4. 数据导出不便，影响工作效率

## 4. 功能需求

### 4.1 核心功能

#### 4.1.1 数据加载功能
- 支持JSON格式数据文件导入
- 提供文件选择界面
- 支持示例数据加载（用于演示和测试）

#### 4.1.2 数据展示功能
- 使用高性能数据表格展示基准测试数据
- 支持分页显示，提高大数据集浏览效率
- 提供数据统计信息展示（总测试数、平均Prefill耗时、平均Decode耗时、平均Token/s）
- 表格搜索功能不放到表格中，搜索输入框和按钮位于表格右上方
- 支持动态调整列宽，当隐藏某些列时，其他列会自动调整宽度以填充表格

#### 4.1.3 数据筛选功能
- 支持按模型名称筛选
- 支持按推理框架筛选
- 支持按输入序列长度筛选（滑块控制）
- 支持按输出序列长度筛选（滑块控制）
- 支持按显示指标筛选（Prefill耗时、Decode耗时、总耗时、Token/s）
- 提供一键重置筛选功能

#### 4.1.4 数据对比功能
- 提供可视化对比分析功能
- 支持不同框架性能对比图表
- 支持不同模型性能对比图表
- 图表支持响应式设计，适配不同屏幕尺寸

#### 4.1.5 数据导出功能
- 支持导出当前筛选结果为CSV格式
- 提供一键导出按钮

### 4.2 辅助功能

#### 4.2.1 界面布局
- 采用左右布局设计：左侧筛选面板，右侧主内容区域
- 专为PC大屏优化，最大化数据展示空间
- 左侧筛选面板固定不滚动，高度为页面高度
- 顶部导航栏固定不滚动，始终显示在页面顶部

#### 4.2 响应式设计
- 支持不同屏幕尺寸的设备
- 在小屏幕设备上自动调整布局

## 5. 非功能需求

### 5.1 性能需求
- 支持大数据量加载和展示（建议单次加载不超过1000条记录）
- 筛选操作响应时间不超过1秒
- 图表渲染时间不超过2秒

### 5.2 兼容性需求
- 支持主流现代浏览器（Chrome、Firefox、Safari、Edge）
- 支持HTML5标准

### 5.3 安全需求
- 数据仅在浏览器本地处理，不上传至服务器
- 支持本地文件读取，无需网络权限

### 5.4 可用性需求
- 界面简洁直观，易于操作
- 提供必要的操作提示和反馈

## 6. 用户界面设计

### 6.1 整体布局
采用左右布局设计：
- 左侧：筛选面板，包含数据加载、模型筛选、框架筛选、序列长度筛选、指标筛选等功能
- 右侧：主内容区域，包含统计信息展示、数据表格、对比分析图表等

专为PC大屏优化，最大化数据展示空间，采用响应式设计适配不同屏幕尺寸。

### 6.2 界面元素

#### 6.2.1 左侧筛选面板
- 数据加载区域：文件选择、加载按钮
- 模型筛选区域：模型名称下拉选择
- 框架筛选区域：推理框架下拉选择
- 序列长度筛选区域：输入序列和输出序列滑块控制
- 指标筛选区域：Prefill耗时、Decode耗时、总耗时、Token/s等复选框
- 重置筛选按钮

筛选面板采用紧凑设计，各筛选器部分之间有清晰的分隔，便于用户快速定位和操作。
左侧筛选面板固定高度，不出现滚动条，通过紧凑布局和调整元素大小来适应固定高度。

#### 6.2.2 右侧主内容区域
- 顶部导航：标题、对比分析按钮、导出数据按钮
- 统计信息卡片：总测试数、平均Prefill耗时、平均Decode耗时、平均Token/s
- 数据表格：展示详细的性能数据
- 表格搜索功能：搜索输入框和按钮位于表格右上方
- 对比分析图表：框架对比图表、模型对比图表

主内容区域采用卡片式设计，各功能模块通过卡片形式展示，提升视觉层次感。

### 6.3 视觉设计

#### 6.3.1 颜色方案
- 主背景色：白色（#ffffff），确保内容清晰可读
- 统计卡片背景色：浅灰色（#f8f9fa），突出统计信息
- 不同框架的性能数据通过颜色区分，如TensorRT使用浅蓝色背景（#e3f2fd），vLLM使用浅绿色背景（#f1f8e9）等
- 按钮采用Tailwind默认颜色方案，主操作按钮使用蓝色主题

#### 6.3.2 尺寸和间距
- 侧边栏最小高度：100vh，确保全屏显示
- 左侧筛选面板固定不滚动，高度为页面高度
- 顶部导航栏固定不滚动，高度为64px
- 图表容器高度：450px（在小屏幕上为300px），保证图表展示效果
- 边框圆角：0.25rem，提供现代化的视觉效果
- 表格字体大小：14px，确保数据可读性
- 统计值字体大小：1.25rem，突出关键数据

#### 6.3.3 紧凑性设计
- 筛选面板采用紧凑布局，内边距为0.125rem，最大化利用空间
- 主内容区域内边距为1.5rem，提供舒适的视觉体验
- 筛选器部分底部边距为0.25rem，保持界面整洁
- 按钮底部外边距为0.5rem，确保按钮之间有适当间距
- 表格单元格内边距为0.75rem，平衡数据密度和可读性
- 表格支持动态调整列宽，当隐藏某些列时，其他列会自动调整宽度以填充表格
- 左侧筛选面板固定高度，不出现滚动条，通过紧凑布局和调整元素大小来适应固定高度
- 顶部导航栏采用紧凑设计，高度为64px，确保在固定位置显示关键功能按钮
- 使用特定的CSS类（如.filter-panel-compact、.filter-section、.filter-title等）来实现紧凑布局

### 6.4 交互设计
- 所有筛选操作实时生效
- 图表切换通过按钮控制显示/隐藏
- 提供操作反馈（如加载状态提示）
- 按钮和卡片具有悬停效果，提升用户体验
- 表格搜索功能位于表格右上方，方便用户快速搜索
- 表格支持动态调整列宽，当隐藏某些列时，其他列会自动调整宽度以填充表格
  - 按钮悬停时轻微上移（translateY(-1px)）并增加阴影
  - 卡片悬停时增加阴影效果，增强交互感

## 7. 数据需求

### 7.1 数据格式
系统支持JSON格式的数据文件，包含以下结构：

```json
{
  "metadata": {
    "version": "1.0",
    "created_at": "2024-01-15T10:00:0Z",
    "description": "大模型性能基准测试数据"
  },
  "benchmarks": [
    {
      "id": "benchmark_001",
      "model_name": "GPT-4",
      "model_version": "4.0",
      "framework": "TensorRT",
      "framework_version": "8.6",
      "hardware": "NVIDIA A100",
      "input_sequence": 1024,
      "output_sequence": 512,
      "metrics": {
        "prefill_time_ms": 45.2,
        "decode_time_ms": 12.8,
        "total_time_ms": 58.0,
        "tokens_per_second": 88.3,
        "memory_usage_mb": 2450,
        "throughput": 92.1
      },
      "timestamp": "2024-01-15T09:30:00Z",
      "environment": {
        "cuda_version": "11.8",
        "python_version": "3.9",
        "os": "Ubuntu 20.04"
      }
    }
  ]
}
```

### 7.2 数据字段说明

| 字段 | 类型 | 描述 |
|------|------|------|
| model_name | string | 模型名称 |
| framework | string | 推理框架 |
| input_sequence | number | 输入序列长度 |
| output_sequence | number | 输出序列长度 |
| metrics.prefill_time_ms | number | Prefill耗时（毫秒） |
| metrics.decode_time_ms | number | Decode耗时（毫秒） |
metrics.total_time_ms | number | 总耗时（毫秒） |
| metrics.tokens_per_second | number | Token处理速度 |
| metrics.memory_usage_mb | number | 内存使用量（MB） |
| metrics.throughput | number | 吞吐量 |

## 8. 技术栈

### 8.1 前端技术
系统采用现代Web技术构建，主要技术栈包括：
- **HTML5**: 页面结构和语义化标签
- **Tailwind CSS**: UI框架，提供响应式设计和实用类驱动的样式系统
- **Alpine.js**: 轻量级JavaScript框架，用于处理交互逻辑
- **JavaScript (ES6+)**: 交互逻辑和数据处理

系统采用模块化的JavaScript架构，将不同功能拆分为独立的模块文件，便于维护和扩展。

### 8.3 外部引用资源地址
系统通过CDN引入以下外部库资源：

- **Tailwind CSS**:
  `https://cdn.tailwindcss.com`
  
- **Tabulator CSS**:
  `https://unpkg.com/tabulator-tables@5.4.4/dist/css/tabulator.min.css`
  
- **Chart.js**:
  `https://cdn.jsdelivr.net/npm/chart.js`
  
- **Alpine.js**:
  `https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js`
  
- **Tabulator JS**:
  `https://unpkg.com/tabulator-tables@5.4.4/dist/js/tabulator.min.js`
  
- **Font Awesome**:
  `https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css`

### 8.2 文件架构
系统采用模块化的前端架构，将功能拆分为多个专门的文件：
- **index.html**: 主页面文件，负责页面结构和布局
- **styles.css**: 样式文件，负责页面外观和视觉效果
- **common.js**: 通用工具函数模块
- **dataHandler.js**: 数据处理模块
- **filterChart.js**: 筛选和图表模块
- **dataExport.js**: 数据导出模块
- **sampleData.js**: 示例数据模块

## 9. 技术规范

### 9.1 前端规范
- **无框架依赖**: 不使用Vue、React等重型框架
- **原生JavaScript**: 使用ES6+标准，采用标准DOM API（querySelector, addEventListener等）
- **Tailwind CSS**: 通过CDN引入，使用实用类名（如text-center, bg-blue-500, w-1/2等）
- **Alpine.js**: 通过CDN引入，用于处理页面交互逻辑
- **响应式设计**: 使用Tailwind的响应式实用类（如md:text-center, lg:w-1/2等）
- **单文件运行**: 所有代码可写在一个HTML文件内，双击即可在浏览器中运行
- **内联样式和脚本**: CSS和JavaScript以内联方式嵌入HTML文件

### 9.2 代码规范
- **状态管理**: 使用变量管理状态，不使用复杂状态机
- **事件绑定**: 在DOMContentLoaded事件后执行事件绑定
- **函数定义**: 所有函数定义在<script>标签内，不使用模块或import
- **代码注释**: 添加必要注释，特别是事件绑定和数据渲染部分
- **CSS定制**: 避免自定义复杂CSS，除非必要
- **HTML标签闭合**: 确保所有HTML标签正确闭合，特别是嵌套的div标签，避免布局问题
- **代码审查**: 在提交代码前，仔细检查HTML结构，确保标签闭合正确

### 9.3 部署规范
- **浏览器兼容**: 支持主流现代浏览器（Chrome、Firefox、Safari、Edge）
- **本地运行**: 数据仅在浏览器本地处理，无需服务器支持
- **资源加载**: 通过CDN加载外部资源
